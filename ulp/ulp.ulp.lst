ESP32ULP GAS  ulp.ulp.pS 			page 1


   1              	       
   2              	       
   3              	       
   4              	    .data
   5              	    .global iomask
   6              	iomask:
   7 0000 20000000 	    .long 32
   8              	    .bss
   9              	    .global ctr
  10              	ctr:
  11 0000 00000000 	    .long 0
  12              	    .text
  13              	    .global entry
  14              	entry:
  15 0000 03008072 	    move r3, iomask
  16 0004 0E0000D0 	    ld r2, r3, 0
  17 0008 03008072 	    move r3, ctr
  18 000c 0901B82E 	    REG_RD ((((0x3ff48400 + 0x24)) - 0x3ff48000) / 4), ((14) + (16) - 1), (14)
  19 0010 20004070 	    and r0, r0, r2
  20 0014 01001482 	    jumpr press, 1, LT
  21 0018 0C0000D0 	    ld r0, r3, 0
  22 001c 01000A82 	    jumpr nopress, 1, LT
  23 0020 06C28313 	    REG_WR ((((0x3ff48800 + 0x0018)) - 0x3ff48000) / 4), ((0) + (8) - 1), (0), ((0xF0) & 0xff)
  24 0024 0626A117 	    REG_WR ((((0x3ff48800 + 0x0018)) - 0x3ff48000) / 4), ((8) + (8) - 1), (8), ((0x49) & 0xff)
  25 0028 060AC01B 	    REG_WR ((((0x3ff48800 + 0x0018)) - 0x3ff48000) / 4), ((16) + (8) - 1), (16), ((0x02) & 0xff)
  26 002c 0602E01F 	    REG_WR ((((0x3ff48800 + 0x0018)) - 0x3ff48000) / 4), ((24) + (8) - 1), (24), ((0) & 0xff)
  27              	nopress:
  28 0030 00008072 	    move r0, 0
  29 0034 0C000068 	    st r0, r3, 0
  30 0038 000000B0 	    halt
  31              	press:
  32 003c 0C0000D0 	    ld r0, r3, 0
  33 0040 01000B82 	    jumpr fast, 1, GE
  34 0044 06628213 	    REG_WR ((((0x3ff48800 + 0x0018)) - 0x3ff48000) / 4), ((0) + (8) - 1), (0), ((0x98) & 0xff)
  35 0048 06EAA017 	    REG_WR ((((0x3ff48800 + 0x0018)) - 0x3ff48000) / 4), ((8) + (8) - 1), (8), ((0x3A) & 0xff)
  36 004c 0602C01B 	    REG_WR ((((0x3ff48800 + 0x0018)) - 0x3ff48000) / 4), ((16) + (8) - 1), (16), ((0) & 0xff)
  37 0050 0602E01F 	    REG_WR ((((0x3ff48800 + 0x0018)) - 0x3ff48000) / 4), ((24) + (8) - 1), (24), ((0) & 0xff)
  38              	fast:
  39 0054 10000072 	    add r0, r0, 1
  40 0058 14000782 	    jumpr btnheld, 20, GE
  41 005c 0C000068 	    st r0, r3, 0
  42 0060 000000B0 	    halt
  43              	btnheld:
  44 0064 0405781F 	    ; REG_WR ((((0x3ff48400 + 0x10)) - 0x3ff48000) / 4), ((14 + 16) + (1) - 1), (14 + 16), ((1) & 0
  45 0068 0105781F 	    ; REG_WR ((((0x3ff48400 + 0x4)) - 0x3ff48000) / 4), ((14 + 16) + (1) - 1), (14 + 16), ((1) & 0x
  46 006c 401F0040 	    ; wait 8000
  47 0070 1C000050 	    adc r0, 0, 7
  48 0074 0C000068 	    st r0, r3, 0
  49 0078 0D070882 	    jumpr lowbat, 1805, LT
  50              	trywake:
  51 007c 3000CC29 	    REG_RD ((((0x3ff48000 + 0xc0)) - 0x3ff48000) / 4), ((19) + ((((((((0x1) >> (0)) & 1) + (((0x1) 
  52 0080 01000090 	    wake
  53 0084 01000483 	    jumpr trywake, 1, LT
  54              	lowbat:
  55 0088 1D01AC15 	    REG_WR ((((0x3ff48400 + 0x74)) - 0x3ff48000) / 4), ((0 + 11) + (1) - 1), (0 + 11), ((0) & 0xff)
  56 008c 0600601C 	    REG_WR ((((0x3ff48000 + 0x18)) - 0x3ff48000) / 4), ((24) + (((((((0x1) >> (0)) & 1) + (((0x1) >
  57 0090 000000B0 	    halt
ESP32ULP GAS  ulp.ulp.pS 			page 2


